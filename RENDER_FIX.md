# Render.com Deployment Fix - Server Error 500

## Issue
Getting "Server Error (500)" on Render.com after deployment.

## Root Causes & Solutions

### 1. Missing Environment Variables
Go to Render Dashboard > Your Service > Environment:

**Required Variables:**
```
DEBUG=False
SECRET_KEY=(auto-generated by Render)
ALLOWED_HOSTS=.onrender.com,your-app-name.onrender.com
DATABASE_URL=(auto-provided by Render from PostgreSQL)
```

### 2. CSRF Trusted Origins
Add this in Render Environment:
```
CSRF_TRUSTED_ORIGINS=https://your-app-name.onrender.com
```

Replace `your-app-name` with your actual Render app name.

### 3. Static Files Issue
The error might be from missing static files. In Render Shell:
```bash
python manage.py collectstatic --noinput
```

### 4. Database Migration
Run migrations in Render Shell:
```bash
python manage.py migrate
```

### 5. Create Superuser
After fixing the above, create a user in Render Shell:
```bash
python manage.py createsuperuser
```

Or use Python shell:
```python
from django.contrib.auth.models import User
User.objects.create_superuser(
    username='admin@example.com',
    email='admin@example.com',
    password='your-secure-password'
)
```

## Quick Fix Steps

1. **Check Render Logs**
   - Go to Render Dashboard
   - Click on your service
   - Click "Logs"
   - Look for the actual error message

2. **Update Environment Variables**
   ```
   DEBUG=False
   ALLOWED_HOSTS=.onrender.com
   ```

3. **Redeploy**
   - Click "Manual Deploy"
   - Select "Clear build cache & deploy"

4. **Run Commands in Shell**
   ```bash
   python manage.py migrate
   python manage.py collectstatic --noinput
   python manage.py createsuperuser
   ```

## Common Errors & Fixes

### Error: "DisallowedHost"
**Fix:** Add your Render URL to ALLOWED_HOSTS
```
ALLOWED_HOSTS=.onrender.com,your-app.onrender.com
```

### Error: "CSRF verification failed"
**Fix:** Add to environment:
```
CSRF_TRUSTED_ORIGINS=https://your-app.onrender.com
```

### Error: "Static files not found"
**Fix:** Run in Shell:
```bash
python manage.py collectstatic --noinput
```

### Error: "Database connection failed"
**Fix:** Check DATABASE_URL is set correctly (Render provides this automatically)

## Deployment Checklist

- [ ] All environment variables set
- [ ] Database connected
- [ ] Migrations run successfully
- [ ] Static files collected
- [ ] Superuser created
- [ ] CSRF_TRUSTED_ORIGINS includes your domain
- [ ] ALLOWED_HOSTS includes .onrender.com

## Test After Deployment

1. Visit: `https://your-app.onrender.com/en/login/`
2. Try to login with created user
3. Check if static files (CSS/JS) load
4. Test responsive design on mobile

## Still Getting 500 Error?

Check Render logs for the exact error:
```
Render Dashboard > Your Service > Logs
```

Look for Python traceback and error message.

## Contact Support

If issue persists, check:
- Render Community: https://community.render.com
- Render Status: https://status.render.com
