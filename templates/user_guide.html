{% extends 'dashboard_base.html' %}
{% load static %}
{% load i18n %}

{% block page_title %}{% trans "Help & Guide" %}{% endblock %}

{% block extra_css %}
<style>
    .guide-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    .guide-hero {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        border-radius: 16px;
        padding: 40px;
        text-align: center;
        color: white;
        margin-bottom: 30px;
        position: relative;
        overflow: hidden;
    }

    .guide-hero::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -10%;
        width: 300px;
        height: 300px;
        background: rgba(255,255,255,0.1);
        border-radius: 50%;
    }

    .guide-hero::after {
        content: '';
        position: absolute;
        bottom: -30%;
        left: -5%;
        width: 200px;
        height: 200px;
        background: rgba(255,255,255,0.1);
        border-radius: 50%;
    }

    .guide-hero h1 {
        font-size: 36px;
        font-weight: 700;
        margin-bottom: 12px;
        position: relative;
        z-index: 1;
    }

    .guide-hero p {
        font-size: 16px;
        opacity: 0.95;
        position: relative;
        z-index: 1;
        margin: 0;
    }

    .quick-nav {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .nav-card {
        background: white;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        transition: all 0.3s;
        cursor: pointer;
        text-decoration: none;
        color: inherit;
        border: 2px solid transparent;
    }

    .nav-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        border-color: #10b981;
        color: inherit;
        text-decoration: none;
    }

    .nav-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        color: white;
        margin-bottom: 16px;
    }

    .nav-card h3 {
        font-size: 18px;
        font-weight: 700;
        color: #1e293b;
        margin-bottom: 8px;
    }

    .nav-card p {
        font-size: 14px;
        color: #64748b;
        margin: 0;
        line-height: 1.5;
    }

    .section-card {
        background: white;
        border-radius: 12px;
        padding: 30px;
        margin-bottom: 20px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .section-title {
        font-size: 24px;
        font-weight: 700;
        color: #1e293b;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .section-title i {
        color: #10b981;
    }

    .steps-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }

    .step-card {
        background: #f8fafc;
        border-radius: 12px;
        padding: 20px;
        border-left: 4px solid #10b981;
        position: relative;
    }

    .step-number {
        position: absolute;
        top: -10px;
        left: 20px;
        width: 30px;
        height: 30px;
        background: #10b981;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 14px;
    }

    .step-card h4 {
        font-size: 16px;
        font-weight: 600;
        color: #1e293b;
        margin: 10px 0 8px 0;
    }

    .step-card p {
        font-size: 14px;
        color: #64748b;
        margin: 0;
        line-height: 1.5;
    }

    .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }

    .feature-card {
        background: #f8fafc;
        border-radius: 12px;
        padding: 20px;
        border: 1px solid #e2e8f0;
    }

    .feature-card h4 {
        font-size: 16px;
        font-weight: 600;
        color: #1e293b;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .feature-card h4 i {
        color: #10b981;
    }

    .feature-card p {
        font-size: 14px;
        color: #64748b;
        margin: 0 0 10px 0;
        line-height: 1.5;
    }

    .feature-card ul {
        margin: 0;
        padding-left: 16px;
    }

    .feature-card li {
        font-size: 13px;
        color: #64748b;
        margin-bottom: 4px;
        line-height: 1.4;
    }

    .info-box {
        padding: 16px 20px;
        border-radius: 12px;
        margin: 20px 0;
        display: flex;
        align-items: flex-start;
        gap: 12px;
    }

    .info-box.success {
        background: #f0fdf4;
        border-left: 4px solid #10b981;
    }

    .info-box.warning {
        background: #fef3c7;
        border-left: 4px solid #f59e0b;
    }

    .info-box.info {
        background: #eff6ff;
        border-left: 4px solid #3b82f6;
    }

    .info-box-icon {
        font-size: 20px;
        flex-shrink: 0;
        margin-top: 2px;
    }

    .info-box.success .info-box-icon { color: #10b981; }
    .info-box.warning .info-box-icon { color: #f59e0b; }
    .info-box.info .info-box-icon { color: #3b82f6; }

    .info-box-content h4 {
        font-size: 15px;
        font-weight: 600;
        margin: 0 0 6px 0;
        color: #1e293b;
    }

    .info-box-content p {
        font-size: 14px;
        color: #64748b;
        margin: 0;
        line-height: 1.5;
    }

    .comparison-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin: 20px 0;
        overflow: hidden;
        border-radius: 12px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .comparison-table thead {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
    }

    .comparison-table th {
        padding: 12px 16px;
        text-align: left;
        font-weight: 600;
        font-size: 14px;
    }

    .comparison-table td {
        padding: 12px 16px;
        border-bottom: 1px solid #f1f5f9;
        font-size: 13px;
        color: #374151;
    }

    .comparison-table tbody tr {
        background: white;
    }

    .comparison-table tbody tr:hover {
        background: #f8fafc;
    }

    .badge {
        display: inline-block;
        padding: 3px 8px;
        border-radius: 6px;
        font-size: 11px;
        font-weight: 600;
    }

    .badge.green { background: #dcfce7; color: #166534; }
    .badge.blue { background: #dbeafe; color: #1e40af; }
    .badge.red { background: #fee2e2; color: #991b1b; }
    .badge.yellow { background: #fef3c7; color: #92400e; }

    .faq-section {
        margin-top: 20px;
    }

    .faq-item {
        background: white;
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        margin-bottom: 10px;
        overflow: hidden;
    }

    .faq-question {
        padding: 16px 20px;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 600;
        color: #1e293b;
        transition: all 0.3s;
    }

    .faq-question:hover {
        background: #f8fafc;
    }

    .faq-answer {
        padding: 0 20px;
        max-height: 0;
        overflow: hidden;
        transition: all 0.3s;
        background: #f8fafc;
    }

    .faq-answer.active {
        padding: 16px 20px;
        max-height: 200px;
    }

    .faq-answer p {
        margin: 0;
        color: #64748b;
        font-size: 14px;
        line-height: 1.6;
    }

    .action-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
    }

    .action-card {
        background: white;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        text-decoration: none;
        color: inherit;
        transition: all 0.3s;
    }

    .action-card:hover {
        border-color: #10b981;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.15);
        color: inherit;
        text-decoration: none;
    }

    .action-card i {
        font-size: 32px;
        color: #10b981;
        margin-bottom: 12px;
    }

    .action-card h4 {
        font-size: 16px;
        font-weight: 600;
        color: #1e293b;
        margin-bottom: 6px;
    }

    .action-card p {
        font-size: 13px;
        color: #64748b;
        margin: 0;
    }

    .video-section {
        background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
        border-radius: 12px;
        padding: 24px;
        margin: 20px 0;
        text-align: center;
    }

    .video-placeholder {
        background: #1e293b;
        border-radius: 12px;
        padding: 40px;
        color: white;
        margin-bottom: 16px;
    }

    .video-placeholder i {
        font-size: 48px;
        margin-bottom: 12px;
        color: #10b981;
    }

    @media (max-width: 768px) {
        .guide-container {
            padding: 0 15px;
        }
        
        .guide-hero {
            padding: 30px 20px;
        }

        .guide-hero h1 {
            font-size: 28px;
        }

        .quick-nav {
            grid-template-columns: 1fr;
        }

        .steps-grid,
        .feature-grid {
            grid-template-columns: 1fr;
        }

        .section-card {
            padding: 20px;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Professional Page Header -->
<div style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); border-bottom: 1px solid #e2e8f0; padding: 24px 30px; margin-bottom: 30px;">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h1 style="font-size: 28px; font-weight: 700; color: #1e293b; margin: 0 0 8px 0;">{% trans "Help & Guide" %}</h1>
            <p style="color: #64748b; margin: 0; font-size: 14px;">
                <span style="margin-right: 20px;"><strong>{% trans "Organization:" %}</strong> {{ user.username|title }}</span>
                <span style="margin-right: 20px;"><strong>{% trans "Period:" %}</strong> 2024</span>
                <span><strong>{% trans "Standard:" %}</strong> ISO 14064-1</span>
            </p>
        </div>
    </div>
</div>

<div class="guide-container">
    <!-- Hero Section -->
    <div class="guide-hero">
        <h1><i class="fas fa-graduation-cap"></i> {% trans "Complete User Guide" %}</h1>
        <p>{% trans "Master greenhouse gas emissions tracking with our comprehensive guide" %}</p>
    </div>

    <!-- Quick Navigation -->
    <div class="quick-nav">
        <a href="#getting-started" class="nav-card">
            <div class="nav-icon">
                <i class="fas fa-rocket"></i>
            </div>
            <h3>{% trans "Getting Started" %}</h3>
            <p>{% trans "Quick start guide to begin tracking emissions in minutes" %}</p>
        </a>

        <a href="#data-collection" class="nav-card">
            <div class="nav-icon">
                <i class="fas fa-database"></i>
            </div>
            <h3>{% trans "Data Collection" %}</h3>
            <p>{% trans "Learn how to enter and manage your emission data" %}</p>
        </a>

        <a href="#scopes-guide" class="nav-card">
            <div class="nav-icon">
                <i class="fas fa-layer-group"></i>
            </div>
            <h3>{% trans "Understanding Scopes" %}</h3>
            <p>{% trans "Complete guide to Scope 1, 2, and 3 emissions" %}</p>
        </a>

        <a href="#reporting" class="nav-card">
            <div class="nav-icon">
                <i class="fas fa-file-alt"></i>
            </div>
            <h3>{% trans "ISO 14064-1 Reporting" %}</h3>
            <p>{% trans "Generate professional compliance reports" %}</p>
        </a>

        <a href="#best-practices" class="nav-card">
            <div class="nav-icon">
                <i class="fas fa-star"></i>
            </div>
            <h3>{% trans "Best Practices" %}</h3>
            <p>{% trans "Tips for accurate and efficient emission tracking" %}</p>
        </a>

        <a href="#troubleshooting" class="nav-card">
            <div class="nav-icon">
                <i class="fas fa-tools"></i>
            </div>
            <h3>{% trans "Troubleshooting" %}</h3>
            <p>{% trans "Common issues and solutions" %}</p>
        </a>
    </div>

    <!-- Getting Started -->
    <div class="section-card" id="getting-started">
        <h2 class="section-title">
            <i class="fas fa-rocket"></i>
            {% trans "Getting Started" %}
        </h2>
        
        <div class="info-box success">
            <i class="fas fa-lightbulb info-box-icon"></i>
            <div class="info-box-content">
                <h4>{% trans "Quick Start in 5 Minutes" %}</h4>
                <p>{% trans "Follow these steps to calculate your first emission and understand the platform" %}</p>
            </div>
        </div>

        <div class="steps-grid">
            <div class="step-card">
                <div class="step-number">1</div>
                <h4>{% trans "Navigate to Data Collection" %}</h4>
                <p>{% trans "Click on \"Data Collection\" in the sidebar menu to access the emission entry form" %}</p>
            </div>

            <div class="step-card">
                <div class="step-number">2</div>
                <h4>{% trans "Select Your Country" %}</h4>
                <p>{% trans "Choose Turkey for Turkish organizations or Global Average for international use" %}</p>
            </div>

            <div class="step-card">
                <div class="step-number">3</div>
                <h4>{% trans "Choose Emission Scope" %}</h4>
                <p>{% trans "Select Scope 1 (direct), Scope 2 (energy), or Scope 3 (indirect) based on your activity" %}</p>
            </div>

            <div class="step-card">
                <div class="step-number">4</div>
                <h4>{% trans "Enter Activity Data" %}</h4>
                <p>{% trans "Fill in the emission source, activity amount, and unit. Add supplier info if available" %}</p>
            </div>

            <div class="step-card">
                <div class="step-number">5</div>
                <h4>{% trans "Calculate & Review" %}</h4>
                <p>{% trans "Click \"Calculate\" to see results. Review the emission factor and total CO2e emissions" %}</p>
            </div>

            <div class="step-card">
                <div class="step-number">6</div>
                <h4>{% trans "View Reports" %}</h4>
                <p>{% trans "Access your data through Dashboard, Analysis, or generate ISO 14064-1 reports" %}</p>
            </div>
        </div>

        <!-- Video Tutorial Section -->
        <div class="video-section">
            <div class="video-placeholder">
                <i class="fas fa-play-circle"></i>
                <h3 style="margin: 0 0 8px 0;">{% trans "Video Tutorial" %}</h3>
                <p style="margin: 0; opacity: 0.8;">{% trans "Watch our 3-minute getting started video" %}</p>
            </div>
            <p style="margin: 0; color: #64748b; font-size: 14px;">
                <i class="fas fa-info-circle"></i> {% trans "Video tutorials coming soon! For now, follow the step-by-step guide above." %}
            </p>
        </div>
    </div>

    <!-- Data Collection Guide -->
    <div class="section-card" id="data-collection">
        <h2 class="section-title">
            <i class="fas fa-database"></i>
            {% trans "Data Collection Guide" %}
        </h2>

        <div class="feature-grid">
            <div class="feature-card">
                <h4><i class="fas fa-globe"></i> {% trans "Country Selection" %}</h4>
                <p>{% trans "Choose the right country for accurate emission factors:" %}</p>
                <ul>
                    <li><strong>{% trans "Turkey:" %}</strong> {% trans "Use for Turkish organizations (recommended)" %}</li>
                    <li><strong>{% trans "Global Average:" %}</strong> {% trans "International standard factors" %}</li>
                    <li>{% trans "Country affects electricity grid, fuel composition, and transport factors" %}</li>
                </ul>
            </div>

            <div class="feature-card">
                <h4><i class="fas fa-industry"></i> {% trans "Industry Types" %}</h4>
                <p>{% trans "Select your industry for better categorization:" %}</p>
                <ul>
                    <li>{% trans "Manufacturing, Services, Technology, Healthcare" %}</li>
                    <li>{% trans "Request new industries if yours isn't listed" %}</li>
                    <li>{% trans "Helps with benchmarking and reporting" %}</li>
                </ul>
            </div>

            <div class="feature-card">
                <h4><i class="fas fa-truck"></i> {% trans "Supplier Management" %}</h4>
                <p>{% trans "Track emissions by supplier:" %}</p>
                <ul>
                    <li>{% trans "Add supplier details when entering data" %}</li>
                    <li>{% trans "Categorize by activity type (Energy, Fuel, etc.)" %}</li>
                    <li>{% trans "Build supplier database for engagement" %}</li>
                </ul>
            </div>

            <div class="feature-card">
                <h4><i class="fas fa-calculator"></i> {% trans "Custom Factors" %}</h4>
                <p>{% trans "Use your own emission factors:" %}</p>
                <ul>
                    <li>{% trans "Add factors from supplier certificates" %}</li>
                    <li>{% trans "Use LCA study results" %}</li>
                    <li>{% trans "Request new materials from our team" %}</li>
                </ul>
            </div>
        </div>

        <div class="info-box info">
            <i class="fas fa-chart-line info-box-icon"></i>
            <div class="info-box-content">
                <h4>{% trans "Data Quality Tips" %}</h4>
                <p>{% trans "Use actual bills and invoices when possible. Monthly data entry provides better tracking than annual estimates. Always double-check units (kWh vs MWh, liters vs gallons)." %}</p>
            </div>
        </div>
    </div>

    <!-- Scopes Guide -->
    <div class="section-card" id="scopes-guide">
        <h2 class="section-title">
            <i class="fas fa-layer-group"></i>
            {% trans "Understanding Emission Scopes" %}
        </h2>

        <div class="feature-grid">
            <div class="feature-card" style="border-left: 4px solid #ef4444;">
                <h4><i class="fas fa-fire" style="color: #ef4444;"></i> {% trans "Scope 1 - Direct Emissions" %}</h4>
                <p>{% trans "Emissions from sources you own or control:" %}</p>
                <ul>
                    <li><strong>{% trans "Stationary Combustion:" %}</strong> {% trans "Boilers, furnaces, generators" %}</li>
                    <li><strong>{% trans "Mobile Combustion:" %}</strong> {% trans "Company vehicles, forklifts" %}</li>
                    <li><strong>{% trans "Fugitive Emissions:" %}</strong> {% trans "Refrigerant leaks, methane" %}</li>
                </ul>
            </div>

            <div class="feature-card" style="border-left: 4px solid #f59e0b;">
                <h4><i class="fas fa-bolt" style="color: #f59e0b;"></i> {% trans "Scope 2 - Energy Indirect" %}</h4>
                <p>{% trans "Emissions from purchased energy:" %}</p>
                <ul>
                    <li><strong>{% trans "Electricity:" %}</strong> {% trans "Grid electricity consumption" %}</li>
                    <li><strong>{% trans "Steam, Heat & Cooling:" %}</strong> {% trans "District heating/cooling systems" %}</li>
                    <li><strong>Location-based:</strong> {% trans "Grid average factors" %}</li>
                </ul>
            </div>

            <div class="feature-card" style="border-left: 4px solid #3b82f6;">
                <h4><i class="fas fa-network-wired" style="color: #3b82f6;"></i> {% trans "Scope 3 - Other Indirect" %}</h4>
                <p>{% trans "All other indirect emissions in your value chain:" %}</p>
                <ul>
                    <li><strong>{% trans "Upstream:" %}</strong> {% trans "Purchased goods, business travel" %}</li>
                    <li><strong>{% trans "Downstream:" %}</strong> {% trans "Product use, end-of-life treatment" %}</li>
                    <li><strong>15 Categories:</strong> {% trans "As defined by GHG Protocol" %}</li>
                </ul>
            </div>
        </div>

        <div class="comparison-table">
            <thead>
                <tr>
                    <th>{% trans "Scope" %}</th>
                    <th>{% trans "Typical %" %}</th>
                    <th>{% trans "Data Accuracy" %}</th>
                    <th>{% trans "Reporting Priority" %}</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="badge red">{% trans "Scope 1" %}</span></td>
                    <td>10-30%</td>
                    <td>{% trans "High (bills, receipts)" %}</td>
                    <td>{% trans "Mandatory" %}</td>
                </tr>
                <tr>
                    <td><span class="badge yellow">{% trans "Scope 2" %}</span></td>
                    <td>20-50%</td>
                    <td>{% trans "High (electricity bills)" %}</td>
                    <td>{% trans "Mandatory" %}</td>
                </tr>
                <tr>
                    <td><span class="badge blue">{% trans "Scope 3" %}</span></td>
                    <td>40-80%</td>
                    <td>{% trans "Medium (estimates)" %}</td>
                    <td>{% trans "Recommended" %}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Turkey-Specific Features -->
    <div class="section-card">
        <h2 class="section-title">
            <i class="fas fa-flag"></i>
            üáπüá∑ Turkey-Specific Features
        </h2>

        <div class="info-box info">
            <i class="fas fa-info-circle info-box-icon"></i>
            <div class="info-box-content">
                <h4>{% trans "Why Turkey-Specific Factors Matter" %}</h4>
                <p>{% trans "Turkey has unique emission factors based on IEA 2023 data and Turkish Ministry of Environment guidelines, providing more accurate results for Turkish organizations." %}</p>
            </div>
        </div>

        <h3 style="font-size: 20px; font-weight: 600; margin: 20px 0 15px 0;">{% trans "Turkey's Energy Mix (2023)" %}</h3>
        <div class="feature-grid">
            <div class="feature-card">
                <h4>üè≠ {% trans "Coal: 37%" %}</h4>
                <p>{% trans "Primarily lignite coal from domestic sources with higher emission factors" %}</p>
            </div>
            <div class="feature-card">
                <h4>‚ö° {% trans "Natural Gas: 26%" %}</h4>
                <p>{% trans "Imported natural gas for power generation and heating" %}</p>
            </div>
            <div class="feature-card">
                <h4>üíß {% trans "Hydropower: 25%" %}</h4>
                <p>{% trans "Renewable hydroelectric power, zero operational emissions" %}</p>
            </div>
            <div class="feature-card">
                <h4>üåû {% trans "Renewables: 12%" %}</h4>
                <p>{% trans "Growing wind and solar capacity" %}</p>
            </div>
        </div>

        <h3 style="font-size: 20px; font-weight: 600; margin: 20px 0 15px 0;">{% trans "Unique Transportation Options" %}</h3>
        <div class="comparison-table">
            <thead>
                <tr>
                    <th>{% trans "Transport Mode" %}</th>
                    <th>{% trans "Emission Factor" %}</th>
                    <th>{% trans "Example Calculation" %}</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>üöê Dolmu≈ü</td>
                    <td>0.082 kg CO2e/km</td>
                    <td>10 km trip = 0.82 kg CO2e</td>
                </tr>
                <tr>
                    <td>üöá Metro (Istanbul)</td>
                    <td>0.028 kg CO2e/km</td>
                    <td>20 km commute = 0.56 kg CO2e</td>
                </tr>
                <tr>
                    <td>üöÇ TCDD Train</td>
                    <td>0.035 kg CO2e/km</td>
                    <td>450 km (IST-ANK) = 16 kg CO2e</td>
                </tr>
                <tr>
                    <td>‚úàÔ∏è Domestic Flight</td>
                    <td>0.245 kg CO2e/km</td>
                    <td>450 km (IST-ANK) = 110 kg CO2e</td>
                </tr>
            </tbody>
        </table>

        <div class="info-box success">
            <i class="fas fa-leaf info-box-icon"></i>
            <div class="info-box-content">
                <h4>{% trans "Sustainable Transport in Turkey" %}</h4>
                <p>{% trans "Taking the train from Istanbul to Ankara produces 85% less emissions than flying! Metro and dolmu≈ü are also efficient options for urban transport." %}</p>
            </div>
        </div>
    </div>

    <!-- Reporting Guide -->
    <div class="section-card" id="reporting">
        <h2 class="section-title">
            <i class="fas fa-file-alt"></i>
            {% trans "ISO 14064-1 Reporting" %}
        </h2>

        <div class="steps-grid">
            <div class="step-card">
                <div class="step-number">1</div>
                <h4>{% trans "Collect Complete Data" %}</h4>
                <p>{% trans "Ensure you have data for all relevant Scope 1, 2, and 3 emissions for your reporting period" %}</p>
            </div>

            <div class="step-card">
                <div class="step-number">2</div>
                <h4>{% trans "Access Reporting" %}</h4>
                <p>{% trans "Navigate to \"Reporting\" in the sidebar to access the ISO 14064-1 report generator" %}</p>
            </div>

            <div class="step-card">
                <div class="step-number">3</div>
                <h4>{% trans "Review Report" %}</h4>
                <p>{% trans "Check the automatically generated report for completeness and accuracy" %}</p>
            </div>

            <div class="step-card">
                <div class="step-number">4</div>
                <h4>{% trans "Enhance Accuracy" %}</h4>
                <p>{% trans "Use the \"Improve report accuracy\" feature to add organizational details" %}</p>
            </div>

            <div class="step-card">
                <div class="step-number">5</div>
                <h4>{% trans "Download PDF" %}</h4>
                <p>{% trans "Generate and download your professional ISO 14064-1 compliant report" %}</p>
            </div>

            <div class="step-card">
                <div class="step-number">6</div>
                <h4>{% trans "Share & Submit" %}</h4>
                <p>{% trans "Use the report for compliance, stakeholder communication, or certification" %}</p>
            </div>
        </div>

        <div class="info-box warning">
            <i class="fas fa-exclamation-triangle info-box-icon"></i>
            <div class="info-box-content">
                <h4>{% trans "Report Quality Checklist" %}</h4>
                <p>{% trans "‚úì All material emissions included ‚Ä¢ ‚úì Consistent methodology ‚Ä¢ ‚úì Appropriate emission factors ‚Ä¢ ‚úì Clear organizational boundary ‚Ä¢ ‚úì Complete documentation" %}</p>
            </div>
        </div>
    </div>

    <!-- Best Practices -->
    <div class="section-card" id="best-practices">
        <h2 class="section-title">
            <i class="fas fa-star"></i>
            {% trans "Best Practices" %}
        </h2>

        <div class="feature-grid">
            <div class="feature-card" style="border-left: 4px solid #10b981;">
                <h4><i class="fas fa-check-circle" style="color: #10b981;"></i> {% trans "DO" %}</h4>
                <ul>
                    <li>{% trans "Select correct country before calculating" %}</li>
                    <li>{% trans "Use actual bills and invoices when available" %}</li>
                    <li>{% trans "Enter data monthly for better tracking" %}</li>
                    <li>{% trans "Add descriptions and supplier information" %}</li>
                    <li>{% trans "Review and validate all entries" %}</li>
                    <li>{% trans "Keep supporting documentation" %}</li>
                    <li>{% trans "Include all material emission sources" %}</li>
                </ul>
            </div>

            <div class="feature-card" style="border-left: 4px solid #ef4444;">
                <h4><i class="fas fa-times-circle" style="color: #ef4444;"></i> {% trans "DON'T" %}</h4>
                <ul>
                    <li>{% trans "Use estimates when actual data is available" %}</li>
                    <li>{% trans "Mix different time periods in one calculation" %}</li>
                    <li>{% trans "Forget to check units (kWh vs MWh)" %}</li>
                    <li>{% trans "Skip Scope 3 emissions entirely" %}</li>
                    <li>{% trans "Ignore data quality issues" %}</li>
                    <li>{% trans "Change methodology mid-year" %}</li>
                    <li>{% trans "Forget to document assumptions" %}</li>
                </ul>
            </div>
        </div>

        <div class="info-box success">
            <i class="fas fa-calendar-check info-box-icon"></i>
            <div class="info-box-content">
                <h4>{% trans "Monthly Data Collection Checklist" %}</h4>
                <p>{% trans "‚úì Electricity bills ‚Ä¢ ‚úì Natural gas bills ‚Ä¢ ‚úì Fuel purchases ‚Ä¢ ‚úì Business travel records ‚Ä¢ ‚úì Waste disposal receipts ‚Ä¢ ‚úì Review dashboard totals" %}</p>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="section-card">
        <h2 class="section-title">
            <i class="fas fa-question-circle"></i>
            {% trans "Frequently Asked Questions" %}
        </h2>

        <div class="faq-section">
            <div class="faq-item">
                <div class="faq-question">
                    <span>{% trans "How accurate are the emission factors?" %}</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>{% trans "All emission factors are based on international standards (IPCC, EPA, DEFRA) and country-specific data from official sources like IEA and Turkish Ministry of Environment. Turkey-specific factors are updated annually and provide higher accuracy for Turkish organizations." %}</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    <span>{% trans "Can I change the country after calculating?" %}</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>{% trans "No, once a calculation is saved, the country cannot be changed as it affects the emission factors used. Always select your country before calculating. You can delete the record and recalculate if needed." %}</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    <span>{% trans "What if my industry or material isn't listed?" %}</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>{% trans "You can request new industries or materials directly from the system. Click \"Add Industry\" or select \"Other\" when choosing materials, then submit a request with details. Our team will research and add appropriate emission factors from official sources." %}</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    <span>{% trans "How often should I track emissions?" %}</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>{% trans "We recommend monthly tracking for Scope 1 and 2 emissions (electricity, fuel) and quarterly for Scope 3 emissions (travel, waste). This provides a good balance between accuracy and effort while enabling trend analysis." %}</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    <span>{% trans "Is my data secure and private?" %}</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>{% trans "Yes, your data is stored securely using industry-standard encryption. We never share your emission data with third parties without your explicit consent. You can export or delete your data at any time from the Settings page." %}</p>
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">
                    <span>{% trans "Can I use custom emission factors?" %}</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <p>{% trans "Yes! You can add custom emission factors from supplier certificates, LCA studies, or your own calculations. Use the \"Custom Factor\" option when entering data, or request new materials from our team for official factors." %}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Troubleshooting -->
    <div class="section-card" id="troubleshooting">
        <h2 class="section-title">
            <i class="fas fa-tools"></i>
            Troubleshooting
        </h2>

        <div class="feature-grid">
            <div class="feature-card">
                <h4><i class="fas fa-exclamation-triangle"></i> {% trans "Common Issues" %}</h4>
                <ul>
                    <li><strong>{% trans "Calculation not working:" %}</strong> {% trans "Check all required fields are filled" %}</li>
                    <li><strong>{% trans "Wrong units:" %}</strong> {% trans "Verify unit selection matches your data" %}</li>
                    <li><strong>{% trans "Missing data:" %}</strong> {% trans "Ensure activity data is greater than 0" %}</li>
                    <li><strong>{% trans "Country issues:" %}</strong> {% trans "Select country before entering data" %}</li>
                </ul>
            </div>

            <div class="feature-card">
                <h4><i class="fas fa-redo"></i> {% trans "Quick Fixes" %}</h4>
                <ul>
                    <li><strong>{% trans "Refresh page:" %}</strong> {% trans "Reload if forms aren't responding" %}</li>
                    <li><strong>{% trans "Clear browser cache:" %}</strong> {% trans "For persistent issues" %}</li>
                    <li><strong>{% trans "Check internet:" %}</strong> {% trans "Ensure stable connection" %}</li>
                    <li><strong>{% trans "Try different browser:" %}</strong> {% trans "Chrome, Firefox, or Edge" %}</li>
                </ul>
            </div>
        </div>

        <div class="info-box warning">
            <i class="fas fa-life-ring info-box-icon"></i>
            <div class="info-box-content">
                <h4>{% trans "Need More Help?" %}</h4>
                <p>{% trans "If you can't find the answer here, visit our" %} <a href="{% url 'ghg:support' %}" style="color: #10b981; font-weight: 600;">{% trans "Support Center" %}</a> {% trans "for additional resources, contact forms, and direct assistance." %}</p>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="section-card" style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border: 2px solid #10b981;">
        <h2 class="section-title" style="margin-bottom: 16px;">
            <i class="fas fa-rocket"></i>
            {% trans "Ready to Start?" %}
        </h2>
        <p style="color: #64748b; margin-bottom: 20px;">
            {% trans "Choose an action below to begin your emission tracking journey" %}
        </p>
        
        <div class="action-cards">
            <a href="{% url 'ghg:data_entry' %}" class="action-card">
                <i class="fas fa-plus-circle"></i>
                <h4>{% trans "Start Data Entry" %}</h4>
                <p>{% trans "Begin calculating emissions" %}</p>
            </a>

            <a href="{% url 'ghg:emission_history' %}" class="action-card">
                <i class="fas fa-history"></i>
                <h4>{% trans "View History" %}</h4>
                <p>{% trans "See your emission records" %}</p>
            </a>

            <a href="/en/reporting/inventory" class="action-card">
                <i class="fas fa-file-alt"></i>
                <h4>{% trans "Generate Report" %}</h4>
                <p>{% trans "Create ISO 14064-1 report" %}</p>
            </a>

            <a href="{% url 'ghg:support' %}" class="action-card">
                <i class="fas fa-headset"></i>
                <h4>{% trans "Get Support" %}</h4>
                <p>{% trans "Contact our team" %}</p>
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// FAQ Toggle functionality
document.querySelectorAll('.faq-item').forEach(item => {
    const question = item.querySelector('.faq-question');
    const answer = item.querySelector('.faq-answer');
    const icon = question.querySelector('i');
    
    question.addEventListener('click', function() {
        // Close all other FAQs
        document.querySelectorAll('.faq-answer').forEach(otherAnswer => {
            if (otherAnswer !== answer) {
                otherAnswer.classList.remove('active');
            }
        });
        
        document.querySelectorAll('.faq-question i').forEach(otherIcon => {
            if (otherIcon !== icon) {
                otherIcon.style.transform = 'rotate(0deg)';
            }
        });
        
        // Toggle current FAQ
        answer.classList.toggle('active');
        
        if (answer.classList.contains('active')) {
            icon.style.transform = 'rotate(180deg)';
        } else {
            icon.style.transform = 'rotate(0deg)';
        }
    });
});

// Smooth scroll for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Highlight current section in navigation
function highlightCurrentSection() {
    const sections = document.querySelectorAll('.section-card[id]');
    const navLinks = document.querySelectorAll('.nav-card[href^="#"]');
    
    let currentSection = '';
    
    sections.forEach(section => {
        const rect = section.getBoundingClientRect();
        if (rect.top <= 100 && rect.bottom >= 100) {
            currentSection = section.id;
        }
    });
    
    navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + currentSection) {
            link.classList.add('active');
        }
    });
}

// Add scroll listener for section highlighting
window.addEventListener('scroll', highlightCurrentSection);

// Add active state styling
const style = document.createElement('style');
style.textContent = `
    .nav-card.active {
        border-color: #10b981 !important;
        background: #f0fdf4 !important;
    }
`;
document.head.appendChild(style);
</script>
{% endblock %}
